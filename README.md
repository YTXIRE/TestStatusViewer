# Test Status Viewer

Сервис позволяет в режиме реального времени следить за ходом выполнения автотестов, реализованных на любом языке.
В моем случае будет разобран пример интеграции с тестовым фреймворком PyTest.

### Настройка проекта

___

1. Клонировать проект на локальный компьютер или удаленный сервер
2. Поднять сервер для UI части (можно запустить даже в режиме отладки, но лучше развернуть отдельный сервер на базе apache или nginx, либо запустить докер образ)
3. Перед сборкой проект перейти в папку "client/src" и указать адрес развернутого беканда в файле "config.json"
4. Перейти в папку "server" и открыть файл "init.sql"
5. В строке, где начинается вставка, указать названия своих проектов, которые будут задействованы в тестах
6. Запустить сборку образов
7. После успешной сборки открыть в браузере следующий метод "http://ip-вашего-сервера:8081/create_db" (данный метод нужен, чтобы создать структуру базы данных)
8. Открыть тесты, в моем случае это PyTest
9. В файле conftest.py вставить следующий код


```python
@pytest.hookimpl(hookwrapper=True)
def pytest_runtest_makereport(item, call):
    result = yield
    report = result.get_result()
    if call.when == 'call' or (report.when == 'setup' and report.outcome == 'failed'):
        from requests import post
        post(
            url='http://127.0.0.1:8081/set_logs',
            json={
                'status': report.outcome,
                'test_name': item.originalname or item.name,
                'message': str(report.longrepr) if report.longrepr is not None else '',
                'project': 'Project 1',
            },
        )
```

### Отслеживание статусов

___

1. Перейти по адресу вашего сервера на порт 8080
2. Выбрать необходимы проект, который вам необходим и запустить тесты
3. Запросы на сервер отправляются каждые две секунды и данные появлятся актуальные
